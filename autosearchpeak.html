<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="layout.css" rel="stylesheet" type="text/css"></link>
    <!--[if IE]><script language="javascript" type="text/javascript" src="flot/excanvas.pack.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="flot/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="flot/jquery.flot.js"></script>
    <script language="javascript" type="text/javascript" src="approximation.js"></script>
 </head>
    <body>
    <h1>Flot Examples</h1>

    <div id="placeholder" style="width:600px;height:300px;"></div>

    <p>Example shows automatically search peak in the experimental data. In
      the data search area exceeds noise level. Noised peak smoothed by
      parabolic. Coordinates of real peak == coordinates of parabola.</p>
    
    <p>Peak: (<span id="peaklist">0</span>)</p>
    
<script id="source" language="javascript" type="text/javascript">
$(function () {
    var d1 = [
[  0, 0.31],
[  1, 0.30],
[  2, 0.30],
[  3, 0.31],
[  4, 0.29],
[  5, 0.32],
[  6, 0.31],
[  7, 0.32],
[  8, 0.31],
[  9, 0.32],
[ 10, 0.32],
[ 11, 0.31],
[ 12, 0.32],
[ 13, 0.32],
[ 14, 0.31],
[ 15, 0.30],
[ 16, 0.31],
[ 17, 0.30],
[ 18, 0.31],
[ 19, 0.30],
[ 20, 0.28],
[ 21, 0.30],
[ 22, 0.30],
[ 23, 0.30],
[ 24, 0.30],
[ 25, 0.31],
[ 26, 0.27],
[ 27, 0.30],
[ 28, 0.34],
[ 29, 0.92],
[ 30, 1.80],
[ 31, 2.85],
[ 32, 3.66],
[ 33, 3.30],
[ 34, 1.92],
[ 35, 1.05],
[ 36, 0.56],
[ 37, 0.37],
[ 38, 0.30],
[ 39, 0.31],
[ 40, 0.33],
[ 41, 0.29],
[ 42, 0.29],
[ 43, 0.29],
[ 44, 0.28],
[ 45, 0.29],
[ 46, 0.29],
[ 47, 0.28],
[ 48, 0.27],
[ 49, 0.27],
[ 50, 0.26],
[ 51, 0.28],
[ 52, 0.30],
[ 53, 0.26],
[ 54, 0.29],
[ 55, 0.29],
[ 56, 0.28],
[ 57, 0.29],
[ 58, 0.30],
[ 59, 0.28],
[ 60, 0.30],
[ 61, 0.29],
[ 62, 0.28],
[ 63, 0.29],
[ 64, 0.30],
[ 65, 0.28],
[ 66, 0.28],
[ 67, 0.26],
[ 68, 0.26],
[ 69, 0.27],
[ 70, 0.26],
[ 71, 0.25],
[ 72, 0.25],
[ 73, 0.25],
[ 74, 0.25],
[ 75, 0.25],
[ 76, 0.27],
[ 77, 0.27],
[ 78, 0.26],
[ 79, 0.27],
[ 80, 0.24],
[ 81, 0.23],
[ 82, 0.26],
[ 83, 0.25],
[ 84, 0.26],
[ 85, 0.24],
[ 86, 0.24],
[ 87, 0.24],
[ 88, 0.25],
[ 89, 0.25],
[ 90, 0.27],
[ 91, 0.27],
[ 92, 0.27],
[ 93, 0.27],
[ 94, 0.26],
[ 95, 0.27],
[ 96, 0.27],
[ 97, 0.28],
[ 98, 0.34],
[ 99, 2.00],
[100, 6.99],
[101, 12.01],
[102, 13.41],
[103, 9.55],
[104, 4.44],
[105, 1.40],
[106, 1.54],
[107, 1.77],
[108, 1.55],
[109, 0.82],
[110, 0.42],
[111, 0.36],
[112, 0.39],
[113, 0.35],
[114, 0.36],
[115, 0.38],
[116, 0.36],
[117, 0.39],
[118, 0.43],
[119, 0.40],
[120, 0.39],
[121, 0.38],
[122, 0.36],
[123, 0.33],
[124, 0.35],
[125, 0.34],
[126, 0.35],
[127, 0.32],
[128, 0.32],
[129, 0.32],
[130, 0.32],
[131, 0.30],
[132, 0.30],
[133, 0.31],
[134, 0.30],
[135, 0.28],
[136, 0.31],
[137, 0.31],
[138, 0.33],
[139, 0.31],
[140, 0.31],
[141, 0.33],
[142, 0.32],
[143, 0.30],
[144, 0.31],
[145, 0.31],
[146, 0.30],
[147, 0.32],
[148, 0.35],
[149, 0.34],
[150, 0.42],
[151, 0.55],
[152, 1.40],
[153, 55.73],
[154, 30.15],
[155, 44.97],
[156, 54.75],
[157, 36.36],
[158, 15.29],
[159, 3.20],
[160, 0.91],
[161, 0.58],
[162, 0.50],
[163, 0.49],
[164, 0.46],
[165, 0.44],
[166, 0.44],
[167, 0.42],
[168, 0.40],
[169, 0.44],
[170, 0.40],
[171, 0.39],
[172, 0.42],
[173, 0.38],
[174, 0.37],
[175, 0.36],
[176, 0.33],
[177, 0.35],
[178, 0.34],
[179, 0.33],
[180, 0.35],
[181, 0.34],
[182, 0.33],
[183, 0.35],
[184, 0.32],
[185, 0.33],
[186, 0.33],
[187, 0.33],
[188, 0.32],
[189, 0.34],
[190, 0.33],
[191, 0.31],
[192, 0.33],
[193, 0.32],
[194, 0.32],
[195, 0.32],
[196, 0.33],
[197, 0.33],
[198, 0.33],
[199, 0.32],
[200, 0.31]
];

    $.plot($("#placeholder"), [ d1 ]);

    var yLevel = 0.6;
    //yLevel = autoYmean(d1);
    var peaks = searchPeak(d1, yLevel, 10);
    var txt = " ";
    for (var i = 0; i < peaks.length; ++i) 
        txt += "[" + peaks[i][0].toFixed(2) + ", " + peaks[i][1].toFixed(2) + "] ";
    $("#peaklist").text(txt);


});
</script>

 </body>
</html>
